(function($){$.fn.NobleCount=function(c_obj,options){var c_settings;var mc_passed=false;if(typeof c_obj=='string'){c_settings=$.extend({},$.fn.NobleCount.settings,options);if(typeof options!='undefined'){mc_passed=((typeof options.max_chars=='number')?true:false);}
return this.each(function(){var $this=$(this);attach_nobility($this,c_obj,c_settings,mc_passed);});}
return this;};$.fn.NobleCount.settings={on_negative:null,on_positive:null,on_update:null,max_chars:140,block_negative:false,cloak:false,in_dom:false};function attach_nobility(t_obj,c_obj,c_settings,mc_passed){var max_char=c_settings.max_chars;var char_area=$(c_obj);if(!mc_passed){var tmp_num=char_area.text();var isPosNumber=(/^[1-9]\d*$/).test(tmp_num);if(isPosNumber){max_char=tmp_num;}}
event_internals(t_obj,char_area,c_settings,max_char,true);$(t_obj).keydown(function(e){event_internals(t_obj,char_area,c_settings,max_char,false);if(check_block_negative(e,t_obj,c_settings,max_char)==false){return false;}});$(t_obj).keyup(function(e){event_internals(t_obj,char_area,c_settings,max_char,false);if(check_block_negative(e,t_obj,c_settings,max_char)==false){return false;}});}
function check_block_negative(e,t_obj,c_settings,max_char){if(c_settings.block_negative){var char_code=e.which;var selected;if(typeof document.selection!='undefined'){selected=(document.selection.createRange().text.length>0);}else{selected=(t_obj[0].selectionStart!=t_obj[0].selectionEnd);}
if((!((find_remaining(t_obj,max_char)<1)&&(char_code>47||char_code==32||char_code==0||char_code==13)&&!e.ctrlKey&&!e.altKey&&!selected))==false){return false;}}
return true;}
function find_remaining(t_obj,max_char){return max_char-($(t_obj).val()).length;}
function event_internals(t_obj,char_area,c_settings,max_char,init_disp){var char_rem=find_remaining(t_obj,max_char);if(char_rem<0){toggle_states(c_settings.on_negative,c_settings.on_positive,t_obj,char_area,c_settings,char_rem);}else{toggle_states(c_settings.on_positive,c_settings.on_negative,t_obj,char_area,c_settings,char_rem);}
if(c_settings.cloak){if(c_settings.in_dom){char_area.attr('data-noblecount',char_rem);}}else{char_area.text(char_rem);}
if(!init_disp&&jQuery.isFunction(c_settings.on_update)){c_settings.on_update(t_obj,char_area,c_settings,char_rem);}}
function toggle_states(toggle_on,toggle_off,t_obj,char_area,c_settings,char_rem){if(toggle_on!=null){if(typeof toggle_on=='string'){char_area.addClass(toggle_on);}else if(jQuery.isFunction(toggle_on)){toggle_on(t_obj,char_area,c_settings,char_rem);}}
if(toggle_off!=null){if(typeof toggle_off=='string'){char_area.removeClass(toggle_off);}}}})(jQuery); 